window.Clapy=function(t){function n(o){if(e[o])return e[o].exports;var c=e[o]={i:o,l:!1,exports:{}};return t[o].call(c.exports,c,c.exports,n),c.l=!0,c.exports}var e={};return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=0)}([function(t,n,e){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e(1);var c=function(){function t(t,n,e,c){var r=t[n];return r&&(void 0===r?"undefined":o(r))===c?r:e}function n(t){var n=document.createElement("button");n.classList.add("clapy__button");var e=document.createElement("div");e.classList.add("clapy__counter"),e.appendChild(document.createTextNode("-")),t.appendChild(n),t.appendChild(e)}function e(t){t.querySelector(".clapy__button").addEventListener("click",r)}function c(n){d.forEach(function(e){var o=t(e.dataset,"clapyUrl",s,"string");n===o&&(e.querySelector(".clapy__counter").innerHTML=f[n].count)})}function r(n){n.preventDefault();var e=n.target.parentNode,o=t(e.dataset,"clapyUrl",s,"string"),r=document.createElement("div");r.classList.add("clapy__clap"),r.appendChild(document.createTextNode("+1")),e.querySelector(".clapy__counter").classList.remove("fadeIn"),e.appendChild(r),e.classList.add("clapy--clapping"),a(e),f[o].count=f[o].count+1,c(o),fetch(""+p+o,{method:"POST"}).then(function(t){return t.json()}).then(function(t){t.clap||(f[o].count=t.count,c(o))}).catch(function(t){console.log(t)})}function a(t){clearTimeout(y),y=setTimeout(function(){t.querySelectorAll(".clapy__clap").forEach(function(t){t.remove()}),t.querySelector(".clapy__counter").classList.add("fadeIn"),t.classList.remove("clapy--clapping")},1e3)}function u(t){f[t]&&f[t].fetching||(f[t]=f[t]||{count:0,fetching:!1},f[t].fetching=!0,fetch(""+p+t).then(function(t){return t.json()}).then(function(n){f[t].count=n.count,f[t].fetching=!1,c(t)}).catch(function(t){console.log(t)}))}var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t(l,"selector",".clapy","string"),p=t(l,"api","https://clapy-dev.now.sh/","string"),f={},s=window.location.href.split("?")[0],d=document.querySelectorAll(i),y=void 0;d.forEach(function(o){var c=t(o.dataset,"clapyUrl",s,"string");n(o),e(o),u(c)})};t.exports=c},function(t,n){}]);